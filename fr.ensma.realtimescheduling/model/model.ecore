<?xml version="1.0" encoding="UTF-8"?>
<ecore:EPackage xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" name="realtimescheduling" nsURI="ensma.fr" nsPrefix="ensma.fr">
  <eAnnotations source="http://www.eclipse.org/OCL/Import">
    <details key="ecore" value="http://www.eclipse.org/emf/2002/Ecore"/>
  </eAnnotations>
  <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
    <details key="invocationDelegates" value="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot"/>
    <details key="settingDelegates" value="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot"/>
    <details key="validationDelegates" value="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot"/>
  </eAnnotations>
  <eClassifiers xsi:type="ecore:EClass" name="HardwareResource">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"
        iD="true"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="scheduledOn" upperBound="-1"
        eType="#//Module" containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="communicatesOver" eType="#//Network"
        containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Task">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="PositiveWCET ExecutionAndDeadlineAllowsCompletion ExecutionAndPeriodAllowsCompletion DeadlineLessThanPeriod PositivePeriod"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="PositiveWCET" value="&#xA;&#x9;&#x9;&#x9;worstCaseExecTime > 0"/>
      <details key="ExecutionAndDeadlineAllowsCompletion" value="&#xA;&#x9;&#x9;&#x9;worstCaseExecTime &lt;= implicitDeadline"/>
      <details key="ExecutionAndPeriodAllowsCompletion" value="&#xA;&#x9;&#x9;&#x9;if (periodicity &lt;> Periodicity::Aperiodic)&#xA;&#x9;&#x9;&#x9;then worstCaseExecTime &lt;= characteristicPeriod&#xA;&#x9;&#x9;&#x9;else true&#xA;&#x9;&#x9;&#x9;endif"/>
      <details key="DeadlineLessThanPeriod" value="&#xA;&#x9;&#x9;&#x9;implicitDeadline &lt;= characteristicPeriod"/>
      <details key="PositivePeriod" value="&#xA;&#x9;&#x9;&#x9;characteristicPeriod > 0"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"
        iD="true"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="worstCaseExecTime" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble" defaultValueLiteral="0"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="implicitDeadline" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="priority" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="responseTime" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="scheduleable" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="jitter" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloat"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="criticalInstance" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="releaseTime" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="periodicity" lowerBound="1"
        eType="#//Periodicity" defaultValueLiteral="Periodic"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="characteristicPeriod" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble">
      <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
        <details key="documentation" value="This field only has 'meaning' if a task is not aperiodic."/>
      </eAnnotations>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EReference" name="partition" lowerBound="1"
        eType="#//Partition" eOpposite="#//Partition/tasks"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="Periodicity">
    <eLiterals name="Periodic"/>
    <eLiterals name="Sporadic" value="1"/>
    <eLiterals name="Aperiodic" value="2"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Module">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="NonZeroPeriod NonOverlappingPartitions"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="NonZeroPeriod" value="&#xA;&#x9;&#x9;&#x9;period > 0"/>
      <details key="NonOverlappingPartitions" value="&#xA;&#x9;&#x9;&#x9;let allIntervals : Sequence(Interval) = partition.executionIntervals->flatten()->sortedBy(i : Interval | i.start) in&#xA;&#x9;&#x9;&#x9;if (allIntervals->size() &lt;= 1) then true&#xA;&#x9;&#x9;&#x9;else &#xA;&#x9;&#x9;&#x9;&#x9;allIntervals->subSequence(1, allIntervals->size() - 1)->forAll(i : Interval | i.end &lt;= allIntervals->at(1 + allIntervals->indexOf(i)).start)&#xA;&#x9;&#x9;&#x9;endif"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="utilization" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble" defaultValueLiteral="0"
        derived="true">
      <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
        <details key="derivation" value="&#xA;&#x9;&#x9;&#x9;if(partition->size() > 0) then&#xA;&#x9;&#x9;&#x9;&#x9;partition->collect(p | p.availabilityFactor)->sum()&#xA;&#x9;&#x9;&#x9;else &#xA;&#x9;&#x9;&#x9;&#x9;0.0&#xA;&#x9;&#x9;&#x9;endif"/>
      </eAnnotations>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="id" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="period" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="partition" upperBound="-1"
        eType="#//Partition" eOpposite="#//Partition/module"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="processors" lowerBound="1"
        upperBound="-1" eType="#//Processor" containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Partition">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="PositivePeriod AvailibilityFactorLessThanOrEqualToOne PeriodSpansIntervals NonOverlappingIntervals"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="PositivePeriod" value="&#xA;&#x9;&#x9;&#x9;period > 0"/>
      <details key="AvailibilityFactorLessThanOrEqualToOne" value="&#xA;&#x9;&#x9;&#x9;availabilityFactor &lt;= 1"/>
      <details key="PeriodSpansIntervals" value="&#xA;&#x9;&#x9;&#x9;&#x9;let sortedIntervals : Sequence(Interval) = executionIntervals->sortedBy(start) in&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;if(sortedIntervals->size() > 1) then sortedIntervals->last().end &lt;= period else true endif"/>
      <details key="NonOverlappingIntervals" value="&#xA;&#x9;&#x9;&#x9;if (executionIntervals->size() &lt;= 1)&#xA;&#x9;&#x9;&#x9;&#x9;then true -- Nothing can overlap if there is only one or none!&#xA;&#x9;&#x9;&#x9;else&#xA;&#x9;&#x9;&#x9;&#x9;let sortedIntervals : Sequence(Interval) = executionIntervals->sortedBy(i : Interval | i.start)&#xA;&#x9;&#x9;&#x9;&#x9;in sortedIntervals->subSequence(1, sortedIntervals->size() - 1)->forAll(i : Interval | i.end &lt;= sortedIntervals->at(1 + sortedIntervals->indexOf(i)).start)&#xA;&#x9;&#x9;&#x9;endif"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="id" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt"
        defaultValueLiteral="0" iD="true"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="period" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"
        changeable="false" defaultValueLiteral="0" derived="true">
      <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
        <details key="derivation" value="if(module->oclIsInvalid() or module->oclIsUndefined() or module=null) then 0.0 else self.module.period endif"/>
      </eAnnotations>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EReference" name="executionIntervals" upperBound="-1"
        eType="#//Interval" containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="virtualProcessorUtilization"
        lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"
        defaultValueLiteral="0"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="availabilityFactor" lowerBound="1"
        eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble" changeable="false"
        defaultValueLiteral="0" derived="true">
      <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
        <details key="derivation" value="&#xA;&#x9;&#x9;&#x9;--check for divide by zero!&#xA;&#x9;&#x9;&#x9;if (period &lt;> 0) then executionIntervals->collect(i : Interval | i.end - i.start)->sum() / period&#xA;&#x9;&#x9;&#x9;else 0.0&#xA;&#x9;&#x9;&#x9;endif"/>
      </eAnnotations>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="schedulingAlgorithm" lowerBound="1"
        eType="#//SchedulingAlgorithm"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="tasks" upperBound="-1"
        eType="#//Task" eOpposite="#//Task/partition"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="module" lowerBound="1"
        eType="#//Module" eOpposite="#//Module/partition"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Interval">
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore">
      <details key="constraints" value="EndAfterStart NonZeroLength"/>
    </eAnnotations>
    <eAnnotations source="http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot">
      <details key="EndAfterStart" value="&#xA;&#x9;&#x9;&#x9;end >= start"/>
      <details key="NonZeroLength" value="&#xA;&#x9;&#x9;&#x9;end &lt;> start"/>
    </eAnnotations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="start" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="end" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Network">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="System">
    <eStructuralFeatures xsi:type="ecore:EReference" name="uses" lowerBound="1" eType="#//HardwareResource"
        containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="executesSoftware" lowerBound="1"
        eType="#//SoftwareResource" containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EEnum" name="SchedulingAlgorithm">
    <eLiterals name="FixedPriority"/>
    <eLiterals name="RateMonotonic" value="1"/>
    <eLiterals name="DeadlineMonotonic" value="2"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="SoftwareResource">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="executedTasks" upperBound="-1"
        eType="#//Task" containment="true"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="containedPartitions" lowerBound="1"
        upperBound="-1" eType="#//Partition" containment="true"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="Processor">
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="name" lowerBound="1" eType="ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString"/>
  </eClassifiers>
</ecore:EPackage>
